{% extends "producto/base_productoB.html" %}
{% load  static %}
{% block panel-content %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<link rel="stylesheet" href="{% static 'css/fontawesome-free-5.15.3-web/css/all.css' %}">
    <div class="container">
      <div class="row">
        <div class="col-sm-12 col-md-12">
          <h3>Reporte diario de ventas y prductos.</h3>
        </div>
      </div>
    </div>
    <div class="container">
      <form class="" method="POST" name="formulario1">{% csrf_token %}
        <div class="row">
          <div class="col-sm-12 col-md-1">
            <span class="input-group-label" style="font-size:24px">COD:</span>
          </div>
          <div class="col-sm-12 col-md-2">
            {{ form.barcode }}
          </div>
          <div class="col-sm-12 col-md-2">
            {{ form.count }}
          </div>
        <div class="col-sm-12 col-md-4">
            <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Selecciona el producto a revisar
              </button>
              <ul class="dropdown-menu dropdown-menu text-center" style="width:100%;" >
                <li><button class="btn btn-primary" type="button" name="boton-product" value="07-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Migajón</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="10-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Reposteria</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="13-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Mostrador</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="16-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Variedad</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="37-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Peineta</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="02-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Bolillo</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="01-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Telera</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="27-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Bolillo artesanal</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="05-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Bolillo integral</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="39-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Bolillo con ajonjoli</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="25-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Telera c/ajonjoli</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="26-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Pan español</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="03-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Baguette</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="29-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Mini bolillo</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="40-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Pan de muerto</button></li>
                <!--<li><button class="btn btn-primary" type="button" name="boton-product" value="#" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Pan de muerto G</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="#" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Pan de muerto F</button></li>-->
                <li><button class="btn btn-primary" type="button" name="boton-product" value="45-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Pan de muerto Relleno</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="41" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Pan de muerto mini</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="36-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Pan de Yema</button></li>
                <!--<li><button class="btn btn-primary" type="button" name="boton-product" value="43-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Pan de Yema M</button></li>
                <li><button class="btn btn-primary" type="button" name="boton-product" value="44-1" style="width:100%; height:3rem; margin-bottom:.5rem;" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo">Pan de Yema G </button></li>
-->
              </ul>
            </div>
          </div>
          <div class="col-sm-12 col-md-2">
              <a href="{% url 'venta_app:venta-index' id=user.id car_num='0' %}" class="btn btn-dark" style="width:100%;">
                Venta
              </a>
          </div>
        </div>
      </form>
    </div>
    {% if user.ocupation == '0' %}
    <div class="container" >
      <div class="row" style="margin-top:.5em;">
        <div class="col-sm-12 col-md-4">
          <div class="card border-primary w-100 h-100 text-bg-white ">
            <div class="card-body text-primary">
              <h5 class="card-title">Total de ventas de hoy:</h5>
                <h3>$ {{ total_vendido }}</h3>
                <!--<h3>$ 26122.00</h3>-->
             </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-4">
          <div class="card border-danger w-100 h-100 text-bg-white ">
            <div class="card-body text-danger">
              <h5 class="card-title">Total de anulaciones:</h5>
                <h3>$ {{ total_anulado }}</h3>  
             </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-4">
          <div class="card border-primary w-100 h-100 text-bg-white ">
            <div class="card-body text-primary">
              <h5 class="card-title">Total de ventas:</h5>
                <h3>{{ num_ventas_hoy }} ventas</h3>
                <!--<h3>712 ventas</h3>-->
                </div>
          </div>
        </div>
      </div>
      <div class="row" style="margin-top:.1em;">
        <div class="col-sm-12 col-md-3">
          <div class="card border-primary w-100 h-100 text-bg-white ">
            <div class="card-body text-primary">
              <h5 class="card-title">Total dejado a cuenta:</h5>
                <h3>$ {{ acuenta | floatformat:2 }}</h3>
              </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-3">
          <div class="card border-danger w-100 h-100 text-bg-white ">
            <div class="card-body text-danger">
              <h5 class="card-title">Restante en pedidos:</h5>
                <h3>$ {{ pendiente | floatformat:2 }}</h3>
              </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-3">
          <div class="card border-primary w-100 h-100 text-bg-white ">
            <div class="card-body text-primary">
              <h5 class="card-title">Total de pedidos:</h5>
                <h3>$ {{ total_pedidos | floatformat:2 }}</h3>        </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-3">
          <div class="card border-primary w-100 h-100 text-bg-white ">
            <div class="card-body text-primary">
              <h5 class="card-title">Pedidos subidos:</h5>
                <h3> {{ pedidos }} pedidos</h3>        
             </div>
          </div>
        </div>
          <!--<div class="col-sm-12 col-md-3">
          <div class="card border-danger w-100 h-100 text-bg-white ">
            <div class="card-body text-danger">
              <h5 class="card-title">Restante cobrado:</h5>
                <h3>$ {{ restante | floatformat:2 }}</h3>   
             </div>
          </div>
        </div>-->
      </div>
      
    </div>
    {% endif %}

    <div class="container" style="margin-top:2em;">
      <div class="row">
        <div class="col-sm-12 col-md-4">
          <div class="row p-1">
            <div class="col-auto " style="">
              <div class="btn-group" role="group">
                <button type="button" name="data-number" class="btn btn-primary" id="btn_1" style="font-size: 2.5rem; width:4.5rem;">1</button>
              </div>
              <div class="btn-group" role="group">
                <button type="button" name="data-number" class="btn btn-primary" id="btn_2" style="font-size: 2.5rem; width:4.5rem;">2</button>
              </div>
              <div class="btn-group" role="group">
                <button type="button" name="data-number" class="btn btn-primary" id="btn_3" style="font-size: 2.5rem; width:4.5rem;">3</button>
              </div>
              <div class="btn-group" role="group">
                <button type="button" name="data-delete" class="btn btn-danger" id="btn_C" style="font-size: 2.5rem; width:4.5rem;">C</button>
              </div>
            </div>
          </div>
          <div class="row p-1">
            <div class="col-auto">
              <div class="btn-group" role="group">
                <button type="button" name="data-number" class="btn btn-primary" id="btn_4" style="font-size: 2.5rem; width:4.5rem;">4</button>
              </div>
              <div class="btn-group" role="group">
                <button type="button" name="data-number" class="btn btn-primary" id="btn_5" style="font-size: 2.5rem; width:4.5rem;">5</button>
              </div>
              <div class="btn-group" role="group">
                <button type="button" name="data-number" class="btn btn-primary" id="btn_6" style="font-size: 2.5rem; width:4.5rem;">6</button>
              </div>
              <div class="btn-group" role="group">
                <button type="button" name="data-number" class="btn btn-primary" id="btn_p" style="font-size: 2.5rem; width:4.5rem;">.</button>
              </div>
            </div>
          </div>
          <div class="row p-1">
            <div class="col-auto">
              <div class="btn-group" role="group">
                <button type="button" name="data-number" class="btn btn-primary" id="btn_7" style="font-size: 2.5rem; width:4.5rem;">7</button>
              </div>
              <div class="btn-group" role="group">
                <button type="button" name="data-number" class="btn btn-primary" id="btn_8" style="font-size: 2.5rem; width:4.5rem;">8</button>
              </div>
              <div class="btn-group" role="group">
                <button type="button" name="data-number" class="btn btn-primary" id="btn_9" style="font-size: 2.5rem; width:4.5rem;">9</button>
              </div>
              <div class="btn-group" role="group">
                <button type="button" name="data-number" class="btn btn-primary" id="btn_0" style="font-size: 2.5rem; width:4.5rem;">0</button>
              </div>
            </div>
          </div>
          <div class="row p-1">
            <div class="col-8">
              <button type="button" class="btn btn-primary" onclick="mandarDatos()" name="button-send" style="width:80%; height:4rem;">Actualizar</button>
            </div>
          </div>
          </div>
          <div class="col-sm-12 col-md-8">
            <table class="table table-hover table-responsive">
              <thead>
                <tr>
                  <th scope="col">Producto</th>
                  <th scope="col">Inventario puerta</th>
                  <th scope="col">Produccion del día(pzas)</th>
                  {% if user.ocupation == '0' %}
                  <th scope="col">Inventario en sistema</th>
                  <th scope="col">Diferencia</th>

                  {% endif %}
                  <th scope="col"></th>
                </tr>
              </thead>
              <tbody>
                {% for producto in productos %}
                <tr>
                  <td>{{ producto.product_report.name }}</td>
                  <td>{{ producto.count_add_report }}</td>
                  <td>{{ producto.product_produce }}</td>
                  {% if user.ocupation == '0' %}
                  <td>{{ producto.count_report }}</td>
                  <td>{{ producto.count_total_report }}</td>

                  {% endif %}
                  <td>
                    <form action="{% url 'producto_app:reporte-general-delete' producto.id%}" method="POST">{% csrf_token %}
                      <button type="submit" class="btn btn-danger" style="">
                        <span class="ms-1 d-none d-sm-inline">X</span>
                      </button>
                    </form>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          {% if user.ocupation == '0' %}



          {% endif %}
      </div>
    </div>


<script src="{% static 'js/lista-reporte.js' %}"></script>

{% endblock panel-content %}
